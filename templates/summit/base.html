{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kenya Software Summit 2025 - Connecting minds, Shaping software, Driving growth </title>

    <!-- Fontawesome -->
    <link rel="stylesheet" href="{% static 'fonts/fontawesome/css/all.min.css' %}" rel="stylesheet">

    <!-- Favicons -->
    <link href="{% static 'images/summit_logo.ico' %}" rel="icon">
    <link href="{% static 'images/apple-touch-icon.png' %}" rel="apple-touch-icon">

    <!-- Vendor CSS Files -->
    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/select2.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/notyf.min.css' %}" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="{% static 'css/dash.css' %}" rel="stylesheet">
    <meta name="csrf-token" content="{{ csrf_token }}">


</head>
<body>
<div class="container-fluid">
    <div class="row">

        <!-- Sidebar -->
        <nav class="col-md-2 d-none d-md-block sidebar p-3">
            <h4 class="text-white mb-4"><i class="fas fa-chart-line me-2"></i> Summit</h4>
            <a href="{% url 'dashboard' %}"><i class="fas fa-home me-2"></i> Dashboard</a>
            <a href="{% url 'mailme' %}"><i class="fas fa-envelope me-2"></i> Email client</a>
            <a href="{% url 'gallery_dashboard' %}">
                <i class="fas fa-images me-2"></i> Gallery Dashboard
            </a>

            <a href="{% url 'partner_dashboard' %}">
                <i class="fas fa-handshake me-2"></i> Partner Dashboard
            </a>

            <a href="{% url 'dashboard_home' %}">
                <i class="fas fa-calendar-alt me-2"></i> Agenda Dashboard
            </a>

            <a href="{% url 'speaker_dashboard' %}">
                <i class="fas fa-microphone me-2"></i> Speaker Dashboard
            </a>
            <a href="{% url 'categories' %}">
                <i class="fas fa-user-check"></i> Guest Categories
            </a>

            <a href="{% url 'admin_dashboard' %}">
                <i class="fas fa-store me-2"></i> Exhibitors Dashboard
            </a>

            <!-- Logout -->
            <form method="post" action="{% url 'logout' %}" class="mt-2">
                {% csrf_token %}
                <button type="submit" class="btn w-100 text-start text-white"
                        style="background:none; border:none; padding:10px 15px;">
                    <i class="fas fa-sign-out-alt me-2"></i> Logout
                </button>
            </form>
        </nav>


        <!-- Main Content -->
        <main class="col-md-10 ms-sm-auto content">
            {% block content %}
                <!-- Page-specific content goes here -->
            {% endblock %}
        </main>

    </div>
</div>

<!-- Bootstrap JS -->
<!-- Scripts -->
<script src="{% static 'js/jquery-3.7.1.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
<script src="{% static 'vendor/aos/aos.js' %}"></script>
<script src="{% static 'vendor/glightbox/js/glightbox.min.js' %}"></script>
<script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
<script src="{% static 'vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
<script src="{% static 'vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
<script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>
<script src="{% static 'js/Accessibility/sienna.min.js' %}" defer></script>
<script src="{% static 'js/translate.js' %}"></script>
<script src="{% static 'js/translater.js' %}" defer></script>
<script src="{% static 'js/select2.min.js' %}"></script>
<script src="{% static 'js/notyf.min.js' %}"></script>
<script src="{% static 'js/extra/notfy_setting.js' %}"></script>
<script src="{% static 'js/extra/external.js' %}"></script>


{% block scripts %}
{% if user.is_authenticated and AUTO_LOGOUT_TIMEOUT %}
<script>
(function() {
  const AUTO_LOGOUT_TIMEOUT = {{ AUTO_LOGOUT_TIMEOUT }};
  let lastActivity = Date.now();

  // Track user interactions
  ['click', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
    document.addEventListener(event, () => lastActivity = Date.now());
  });

  // Check inactivity every 30 seconds
  setInterval(() => {
    const elapsed = (Date.now() - lastActivity) / 1000;
    if (elapsed > AUTO_LOGOUT_TIMEOUT) {
      console.log("Session expired due to inactivity.");
      window.location.href = "{% url 'logout' %}";
    }
  }, 30000);
})();
</script>
{% endif %}

{% endblock %}
</body>
</html>
