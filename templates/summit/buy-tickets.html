{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kenya Software Summit 2025 - Connecting minds, Shaping software, Driving growth </title>

    <!-- Fontawesome -->
    <link rel="stylesheet" href="{% static 'fonts/fontawesome/css/all.min.css' %}" rel="stylesheet">

    <!-- Favicons -->
    <link href="{% static 'images/summit_logo.ico' %}" rel="icon">
    <link href="{% static 'images/apple-touch-icon.png' %}" rel="apple-touch-icon">

    <!-- Vendor CSS Files -->
    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="{% static 'css/main.css' %}" rel="stylesheet">

</head>

<body class="buy-tickets-page">

<header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="#hero" class="logo d-flex align-items-center">
        <img alt="Court of Arms" src="{% static 'images/court_of_arms.png' %}">
          <div class="logo-divider mx-2"></div>
        <img alt="Summit Logo" src="{% static 'images/summit_logo_light.webp' %}" >
      </a>


      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'home' %}" class="active">HOME</a></li>
          <li><a href="{% url 'home' %}">ABOUT</a></li>
          <li><a href="{% url 'home' %}">REGISTER</a></li>
          <li><a href="{% url 'home' %}">AGENDA</a></li>
          <li><a href="{% url 'home' %}">SPEAKERS</a></li>
          <li><a href="{% url 'home' %}">FEATURES</a></li>
          <li><a href="{% url 'home' %}">PARTNERS</a></li>
          <li class="dropdown"><a href="#"><span>MORE</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="#gallery">MEDIA</a></li>
              <li><a href="{% url 'not_found' %}">VENUE</a></li>
              <li><a href="{% url 'privacy' %}">PRIVACY</a></li>
            </ul>
          </li>  
        </ul>
        <div class="nav-extras d-flex align-items-center gap-2">
          <!-- Mobile nav toggle -->
           <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>

          <!-- Translate Globe (mobile only) -->
          <i class="translate-toggle d-xl-none fs-4" aria-label="Translate" style="font-style: normal !important;">üåê</i>

          <!-- Translation widget (popover, hidden by default) -->
          <div class="translate-popover d-none">
            <div class="gtranslate_wrapper"></div>
          </div>
        </div>
      </nav>


      <!-- <a class="btn-getstarted" href="{% url 'register' %}">Buy Tickets</a> -->

    </div>
</header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title dark-background" >
      <div class="container position-relative">
        <h1>Buy Tickets</h1>
        <p>Register and buy tickets for the Kenya Software Summit 2025</p>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="index.html">Home</a></li>
            <li class="current">Buy Tickets</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <!-- Buy Tickets Section -->
    <section id="buy-tickets" class="buy-tickets section">

      <div class="container">

        <div class="row justify-content-center">
          <div class="col-lg-8">

            <div class="ticket-form-wrapper">
              <div class="event-info mb-5">
                <h3>Tech Innovation Conference 2026</h3>
                <div class="event-details">
                  <div class="event-meta">
                    <span><i class="bi bi-calendar-event"></i> November 9-12, 2025</span>
                    <span><i class="bi bi-geo-alt"></i> Eldoret City</span>
                    <span><i class="bi bi-clock"></i> 9:00 AM - 6:00 PM</span>
                  </div>
                </div>
              </div>

              <div class="ticket-types">
                <h4>Select Ticket Type</h4>

                <div class="ticket-option">
                  <input type="radio" id="early-bird" name="ticket_type" value="early-bird" checked="">
                  <label for="early-bird" class="ticket-label">
                    <div class="ticket-info">
                      <div class="ticket-name">Early Bird Pass</div>
                      <div class="ticket-description">Full access to all sessions and networking events</div>
                      <div class="ticket-benefits">
                        <span>‚úì All conference sessions</span>
                        <span>‚úì Networking lunch</span>
                        <span>‚úì Welcome kit</span>
                      </div>
                    </div>
                    <div class="ticket-price">
                      <span class="original-price">Ksh 299</span>
                      <span class="current-price">Ksh 199</span>
                    </div>
                  </label>
                </div>

                <div class="ticket-option">
                  <input type="radio" id="standard" name="ticket_type" value="standard">
                  <label for="standard" class="ticket-label">
                    <div class="ticket-info">
                      <div class="ticket-name">Standard Pass</div>
                      <div class="ticket-description">Access to main conference sessions</div>
                      <div class="ticket-benefits">
                        <span>‚úì All conference sessions</span>
                        <span>‚úì Welcome kit</span>
                      </div>
                    </div>
                    <div class="ticket-price">
                      <span class="current-price">Ksh 249</span>
                    </div>
                  </label>
                </div>

                <div class="ticket-option">
                  <input type="radio" id="vip" name="ticket_type" value="vip">
                  <label for="vip" class="ticket-label">
                    <div class="ticket-info">
                      <div class="ticket-name">VIP Pass</div>
                      <div class="ticket-description">Premium experience with exclusive access</div>
                      <div class="ticket-benefits">
                        <span>‚úì All conference sessions</span>
                        <span>‚úì VIP networking dinner</span>
                        <span>‚úì Premium welcome kit</span>
                        <span>‚úì Priority seating</span>
                        <span>‚úì Meet &amp; greet with speakers</span>
                      </div>
                    </div>
                    <div class="ticket-price">
                      <span class="current-price">Ksh 399</span>
                    </div>
                  </label>
                </div>

                <div class="ticket-option">
                  <input type="radio" id="student" name="ticket_type" value="student">
                  <label for="student" class="ticket-label">
                    <div class="ticket-info">
                      <div class="ticket-name">Student Pass</div>
                      <div class="ticket-description">Special pricing for students with valid ID</div>
                      <div class="ticket-benefits">
                        <span>‚úì All conference sessions</span>
                        <span>‚úì Student networking session</span>
                        <span>‚úì Digital resources</span>
                      </div>
                    </div>
                    <div class="ticket-price">
                      <span class="current-price">Ksh 99</span>
                    </div>
                  </label>
                </div>
              </div>
              
              <!-- Alerts container (injected dynamically) -->
              <div id="alert-container"></div>

              <form method="post" action="{% url 'register' %}" class="ticket-form" id="register-form">
                {% csrf_token %}

                <!-- Title -->
                <div class="mb-3">
                  <label for="title" class="form-label fw-semibold dark">Title</label>
                  {{ form.title }}
                  {% if form.title.errors %}
                    <div class="text-danger small">{{ form.title.errors }}</div>
                  {% endif %}
                </div>

                <!-- Row 1: First + Other Names -->
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="id_first_name" class="form-label fw-semibold dark">First Name</label>
                    {{ form.first_name }}
                    {% if form.first_name.errors %}
                      <div class="text-danger small">{{ form.first_name.errors }}</div>
                    {% endif %}
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="id_second_name" class="form-label fw-semibold dark">Other Names</label>
                    {{ form.second_name }}
                    {% if form.second_name.errors %}
                      <div class="text-danger small">{{ form.second_name.errors }}</div>
                    {% endif %}
                  </div>
                </div>

                <!-- Row 2: Email + Phone -->
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="id_email" class="form-label fw-semibold dark">Email</label>
                    {{ form.email }}
                    {% if form.email.errors %}
                      <div class="text-danger small">{{ form.email.errors }}</div>
                    {% endif %}
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="id_phone" class="form-label fw-semibold dark">Phone</label>
                    {{ form.phone }}
                    {% if form.phone.errors %}
                      <div class="text-danger small">{{ form.phone.errors }}</div>
                    {% endif %}
                  </div>
                </div>

                <!-- Job Title -->
                <div class="mb-3">
                  <label for="id_job_title" class="form-label fw-semibold dark">Job Title / Role</label>
                  {{ form.job_title }}
                  {% if form.job_title.errors %}
                    <div class="text-danger small">{{ form.job_title.errors }}</div>
                  {% endif %}
                </div>

                <!-- Organization type + Other (always visible) -->
                <div class="mb-3">
                  {{ form.organization_type.label_tag }}
                  {{ form.organization_type }}
                  {% if form.organization_type.errors %}
                    <div class="text-danger small">{{ form.organization_type.errors }}</div>
                  {% endif %}

                  {{ form.other_organization_type }}
                  {% if form.other_organization_type.errors %}
                    <div class="text-danger small">{{ form.other_organization_type.errors }}</div>
                  {% endif %}
                </div>

                <!-- Interests (conditionally show "Other interest") -->
                <div class="mb-3">
                  <label class="form-label">Areas of Interest</label>
                  <div class="d-block">{{ form.interests }}</div>
                  {% if form.interests.errors %}
                    <div class="text-danger small">{{ form.interests.errors }}</div>
                  {% endif %}

                  <div id="other-interest-wrapper" style="display:none;">
                    {{ form.other_interest }}
                    {% if form.other_interest.errors %}
                      <div class="text-danger small">{{ form.other_interest.errors }}</div>
                    {% endif %}
                  </div>
                </div>

                <!-- Accessibility Needs -->
                <div class="mb-3">
                  {{ form.accessibility_needs.label_tag }}
                  {{ form.accessibility_needs }}
                  {% if form.accessibility_needs.errors %}
                    <div class="text-danger small">{{ form.accessibility_needs.errors }}</div>
                  {% endif %}
                </div>

                <!-- Updates Opt-In -->
                <div class="form-check mb-3">
                  {{ form.updates_opt_in }}
                  {{ form.updates_opt_in.label_tag }}
                </div>

                <!-- Ticket quantity -->
                <div class="form-group mt-3">
                  <label for="quantity">Number of Tickets</label>
                  <select name="quantity" id="quantity" class="form-select">
                    <option value="1">1 Ticket</option>
                    <option value="2">2 Tickets</option>
                    <option value="3">3 Tickets</option>
                    <option value="4">4 Tickets</option>
                    <option value="5">5 Tickets</option>
                  </select>
                </div>

                <!-- Pricing summary -->
                <div class="pricing-summary mt-4">
                  <h5>Order Summary</h5>
                  <div class="summary-row"><span>Selected Ticket:</span><span class="ticket-name-display">Early Bird Pass</span></div>
                  <div class="summary-row"><span>Quantity:</span><span class="quantity-display">1</span></div>
                  <div class="summary-row"><span>Unit Price:</span><span class="unit-price-display">Ksh 199</span></div>
                  <div class="summary-row total"><span>Total Amount:</span><span class="total-price">Ksh 199</span></div>
                  <div class="tax-note">*All prices include applicable taxes and fees</div>
                </div>

                <!-- Terms -->
                <div class="form-check mt-3">
                  <input type="checkbox" id="terms" name="terms" required>
                  <label for="terms">I agree to the <a href="{% url 'privacy' %}" target="_blank">Privacy Policy</a> *</label>
                </div>

                <div class="form-submit mt-3">
                  <button type="submit" class="btn-submit" id="submit-btn">
                    <span class="btn-text">
                      <i class="bi bi-credit-card me-2"></i> Proceed to Payment
                    </span>
                    <span class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
                  </button>
                </div>

              </form>




              <div class="security-info">
                <div class="security-badges">
                  <div class="badge-item">
                    <i class="bi bi-shield-check"></i>
                    <span>Secure Payment</span>
                  </div>
                  <div class="badge-item">
                    <i class="bi bi-lock"></i>
                    <span>SSL Encrypted</span>
                  </div>
                  <div class="badge-item">
                    <i class="bi bi-arrow-clockwise"></i>
                    <span>Full Refund Available</span>
                  </div>
                </div>
                <div class="payment-methods">
                  <span class="payment-label">We Accept:</span>
                  <div class="payment-icons">
                    <i class="bi bi-credit-card"></i>
                    <i class="bi bi-paypal"></i>
                    <span class="payment-text">Visa, MasterCard, AmEx, PayPal</span>
                  </div>
                </div>
              </div>

            </div>

          </div>
        </div>

      </div>

    </section><!-- /Buy Tickets Section -->

  </main>

<footer id="footer" class="footer position-relative dark-background">

    <div class="container footer-top">
        <div class="row gy-4 justify-content-evenly">
            <div class="col-lg-4 col-md-6 footer-about">
                <a href="index.html" class="logo d-flex align-items-center">
                    <span class="sitename"> Kenya Software Summit</span>
                </a>

                <p>Africa‚Äôs premier software development and innovation conference. Join us in shaping the future of
                    Africa‚Äôs digital economy through collaboration, talent development, and innovation.</p>
                <div class="social-links d-flex mt-3">
                    <a aria-label="Follow us on X (Twitter)" href="https://x.com/MoICTKenya" target="_blank">
                        <i class="bi bi-twitter-x"></i>
                    </a>
                    <a aria-label="Follow us on Facebook" href="https://www.facebook.com/MoICTKE" target="_blank">
                        <i class="bi bi-facebook"></i>
                    </a>
                    <a aria-label="Connect with us on LinkedIn"
                       href="https://www.linkedin.com/company/ministry-of-information-communications-and-the-digital-economy/"
                       target="_blank">
                        <i class="bi bi-linkedin"></i>
                    </a>
                    <a aria-label="Subscribe to our Youtube Channel" href="https://www.youtube.com/@micde_ke/"
                       target="_blank">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="{% url 'home' %}">About</a></li>
            <li><a href="{% url 'speakers' %}">Speakers</a></li>
            <li><a href="{% url 'home' %}">Agenda</a></li>
            <li><a href="{% url 'home' %}">Register</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Resources</h4>
          <ul>
            <li><a href="{% url 'home' %}">Features</a></li>
            <li><a href="{% url 'home' %}">Partners</a></li>
            <li><a href="{% url 'media' %}">Media</a></li>
            <li><a href="{% url 'privacy' %}">Privacy</a></li>
          </ul>
        </div>

        </div>
    </div>

    <div class="container copyright text-center mt-4">
        <p class="text-light mb-0">&copy; <span id="year"> </span> <span>Copyright</span> <strong class="px-1 sitename">Kenya
            Software Summit. </strong> <span>All Rights Reserved. </span></p>

    </div>

</footer>

<!-- Scroll Top -->
<a id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
        class="bi bi-arrow-up-short"></i></a>



  <!-- Preloader -->
  <div id="preloader">
    <!-- Light mode logo -->
    <img src="{% static 'images/summit_logo_light.webp' %}" alt="Summit Logo" class="logo-loader light-logo">
    <!-- Dark mode logo -->
    <img src="{% static 'images/summit_logo_dark.webp' %}" alt="Summit Logo" class="logo-loader dark-logo">
  </div>



    <!-- Scripts -->
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
    <script src="{% static 'vendor/aos/aos.js' %}"></script>
    <script src="{% static 'vendor/glightbox/js/glightbox.min.js' %}"></script>
    <script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
    <script src="{% static 'vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'js/Accessibility/sienna.min.js' %}" defer></script>
    <script src="{% static 'js/translate.js' %}" ></script>
    <script src="{% static 'js/translater.js' %}" defer></script>



<!-- Main JS File -->
<script src="{% static 'js/main.js' %}"></script>

<script src="{% static 'js/custom/main.js' %}"></script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  // ==============================
  // üîπ Flash alerts auto-hide
  // ==============================
  const flashAlert = document.getElementById("flash-alert");
  if (flashAlert) {
    setTimeout(() => {
      flashAlert.classList.remove("show");
      flashAlert.classList.add("hide");
    }, 5000);
  }

  // ==============================
  // üîπ Toggle "Other" interest
  // ==============================
  const otherInterestWrapper = document.getElementById("other-interest-wrapper");
  const interestsInputs = document.querySelectorAll("input[name='interests']");
  function toggleOtherInterest() {
    if (!otherInterestWrapper) return;
    const show = Array.from(interestsInputs).some(
      input => input.checked && input.value === "others"
    );
    otherInterestWrapper.style.display = show ? "block" : "none";
  }
  if (interestsInputs.length) {
    interestsInputs.forEach(input => input.addEventListener("change", toggleOtherInterest));
    toggleOtherInterest();
  }

  // ==============================
  // üîπ Ticket price calculation
  // ==============================
  const ticketRadios = document.querySelectorAll("input[name='ticket_type']");
  const quantitySelect = document.getElementById("quantity");
  const ticketNameDisplay = document.querySelector(".ticket-name-display");
  const quantityDisplay   = document.querySelector(".quantity-display");
  const unitPriceDisplay  = document.querySelector(".unit-price-display");
  const totalPriceDisplay = document.querySelector(".total-price");

  const ticketPrices = {
    "early-bird": { name: "Early Bird Pass", price: 199 },
    "standard":   { name: "Standard Pass",   price: 249 },
    "vip":        { name: "VIP Pass",        price: 399 },
    "student":    { name: "Student Pass",    price: 99 }
  };

  function updateSummary() {
    const selected = document.querySelector("input[name='ticket_type']:checked");
    if (!selected || !quantitySelect) return;
    const ticket   = ticketPrices[selected.value];
    const quantity = parseInt(quantitySelect.value) || 1;
    if (ticketNameDisplay) ticketNameDisplay.textContent = ticket.name;
    if (quantityDisplay)   quantityDisplay.textContent   = quantity;
    if (unitPriceDisplay)  unitPriceDisplay.textContent  = "Ksh " + ticket.price;
    if (totalPriceDisplay) totalPriceDisplay.textContent = "Ksh " + (ticket.price * quantity);
  }
  if (ticketRadios.length && quantitySelect) {
    ticketRadios.forEach(r => r.addEventListener("change", updateSummary));
    quantitySelect.addEventListener("change", updateSummary);
    updateSummary();
  }

  // ==============================
  // üîπ AJAX Form Submission
  // ==============================
  const form = document.querySelector(".ticket-form");
  if (form) {
    const submitBtn = document.getElementById("submit-btn");
const spinner   = submitBtn.querySelector(".spinner-border");
const btnText   = submitBtn.querySelector(".btn-text");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      // Show spinner
      submitBtn.disabled = true;
      spinner.classList.remove("d-none");
      btnText.textContent = "Processing...";

      const formData = new FormData(form);

      fetch(form.action, {
        method: "POST",
        body: formData,
        headers: { "X-Requested-With": "XMLHttpRequest" },
      })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          showAlert("success", data.message);
          form.reset();
          updateSummary();
        } else {
          for (let field in data.errors) {
            const input = document.querySelector(`[name="${field}"]`);
            if (input) {
              const errorDiv = document.createElement("div");
              errorDiv.className = "text-danger small mt-1";
              errorDiv.innerText = data.errors[field].join(", ");
              input.insertAdjacentElement("afterend", errorDiv);
            }
          }
          showAlert("danger", "‚ö†Ô∏è Please correct the errors below.");
        }
      })
      .catch(err => {
        showAlert("danger", "‚ùå Something went wrong. Try again.");
        console.error(err);
      })
      .finally(() => {
        // Hide spinner, restore button
        submitBtn.disabled = false;
        spinner.classList.add("d-none");
        btnText.textContent = "Proceed to Payment";
      });
    });

    
    function showAlert(type, message) {
      const container = document.createElement("div");
      container.className = `alert alert-${type} alert-dismissible fade show mt-3`;
      container.role = "alert";
      container.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      `;
      const alertContainer = document.getElementById("alert-container");
      if (alertContainer) {
        alertContainer.innerHTML = "";
        alertContainer.appendChild(container);
      } else {
        form.insertAdjacentElement("beforebegin", container);
      }
      setTimeout(() => container.remove(), 5000);
    }
  }
});
</script>


</body>

</html>